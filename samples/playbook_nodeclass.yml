---
#
# samples/playbook_nodeclass.yml
#

# Playbook sample for deploying IBM Spectrum Scale (GPFS) cluster with node
# classes and Spectrum Scale configuration attributes. Node classes can be
# defined on a per-node basis by defining the `scale_nodeclass` variable, it is
# recommended to use Ansible host variables for this purpose:
# https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#assigning-a-variable-to-one-machine-host-variables

# Here is an example definition of these node classes for hosts 'scale01' and
# 'scale02':
#   ```
#   # host_vars/scale01:
#   ---
#   scale_nodeclass:
#     - classA
#     - classB
#   ```
#   ```
#   # host_vars/scale02:
#   ---
#   scale_nodeclass:
#     - classA
#     - classC
#   ```

# These node classes can optionally be used to define Spectrum Scale
# configuration attributes. It is recommended to use Ansible group variables for
# this purpose:
# https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#assigning-a-variable-to-many-machines-group-variables

# Sample definitions can be found in samples/vars/config_vars.yml

- hosts: cluster01
  collections:
    - ibm.spectrum_scale
  vars:
    - scale_version: 5.0.4.0
    - scale_install_localpkg_path: /root/Spectrum_Scale_Standard-5.0.4.0-x86_64-Linux-install
  pre_tasks:
    - include_vars: config_vars.yml
  roles:
    - core/precheck
    - core/node
    - core/cluster
    - core/postcheck
