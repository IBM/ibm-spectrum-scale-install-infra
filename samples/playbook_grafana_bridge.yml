---
- name: Install and configure IBM Grafana Bridge
  hosts: all
  become: true

  vars_prompt: 
    - name: grafana_bridge_opentsdb_port
      prompt: "Enter the OpenTSDB port value"
      private: no
      default: "4242"

    - name: grafana_bridge_prometheus_port
      prompt: "Enter the Prometheus port value"
      private: no
      default: "9250"

    - name: grafana_bridge_password_raw
      prompt: "Enter the password for Grafana Bridge"
      private: yes
      default: "TXlWZXJ5U3Ryb25nUGFzc3cwcmQhCg=="

  vars:
    grafana_bridge_encoded_password: "{{ grafana_bridge_password_raw | b64encode }}"

  roles:
   - grafana_bridge_install
   - grafana_bridge_configure
   - grafana_bridge_verify
